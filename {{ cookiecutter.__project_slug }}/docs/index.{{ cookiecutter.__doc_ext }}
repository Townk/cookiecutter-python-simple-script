{# -*- mode: jinja2; -*- #}
{%- macro heading(text, title) -%}
{% if cookiecutter.__use_markdown == "y" -%}
{{ "#" if title else "##" }} {{ text }}
{%- else -%}
{{ text }}
{% for _ in text %}{{ "=" if title else "-" }}{% endfor %}
{%- endif %}
{%- endmacro -%}
{%- macro link(text, url) -%}
{% if cookiecutter.__use_markdown == "y" -%}
[{{ text }}]({{ url }})
{%- else -%}
`{{ text }} <{{ url }}>`_
{%- endif %}
{%- endmacro -%}
{{ heading(cookiecutter.project_name, True) }}

{% if cookiecutter.__use_markdown == "y" -%}
* [Usage](usage.md)
* [Reeference](reference.md)
{%- if cookiecutter.license != "None" %}
* [License](license.md)
{%- endif %}
* [Changelog](changelog.md)
{%- else %}
.. toctree::
   :maxdepth: 1

   Usage <usage>
   Reference <reference>
{%- if cookiecutter.license != "None" %}
   License <license>
{%- endif %}
   Changelog <changelog>
{%- endif %}

{% if cookiecutter.__use_markdown == "y" -%}
```eval_rst
{%- endif %}
.. include:: ../README.{{ cookiecutter.__doc_ext }}
   :start-after: {% if cookiecutter.__use_markdown == "y" %}<!-- more -->{%- else %}.. more{% endif %}
{% if cookiecutter.__use_markdown == "y" -%}
```
{%- endif -%}
